"use strict";(self.webpackChunkxterio=self.webpackChunkxterio||[]).push([[7547],{"./src/packages/XS-Table/index.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Template:()=>Template,__namedExportsOrder:()=>__namedExportsOrder,default:()=>index_stories});var esm_extends=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/extends.js"),asyncToGenerator=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),react=__webpack_require__("./node_modules/react/index.js"),regenerator=__webpack_require__("./node_modules/@babel/runtime/regenerator/index.js"),regenerator_default=__webpack_require__.n(regenerator),slicedToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),useUnmount=__webpack_require__("./node_modules/ahooks/es/useUnmount/index.js");const es_useRafState=function useRafState(initialState){var ref=(0,react.useRef)(0),_a=(0,tslib_es6.__read)((0,react.useState)(initialState),2),state=_a[0],setState=_a[1],setRafState=(0,react.useCallback)((function(value){cancelAnimationFrame(ref.current),ref.current=requestAnimationFrame((function(){setState(value)}))}),[]);return(0,useUnmount.Z)((function(){cancelAnimationFrame(ref.current)})),[state,setRafState]};var useDebounceEffect=__webpack_require__("./node_modules/ahooks/es/useDebounceEffect/index.js"),components=__webpack_require__("./src/components/index.ts"),Empty=__webpack_require__("./src/components/Empty/index.tsx"),contexts=__webpack_require__("./src/contexts/index.ts"),react_content_loader_es=__webpack_require__("./node_modules/react-content-loader/dist/react-content-loader.es.js"),pager=__webpack_require__("./src/components/pager/index.tsx"),__jsx=react.createElement;function HistoryTableMobile(_ref){var dataSource=_ref.dataSource,_ref$pageCnt=_ref.pageCnt,pageCnt=void 0===_ref$pageCnt?0:_ref$pageCnt,needPager=_ref.needPager,Item=_ref.item,isLoading=_ref.isLoading,pageSize=_ref.pageSize,onPageChange=_ref.onPageChange;return __jsx("div",{className:"w-[100%] border-t-2 border-solid border-xwhite-op20"},!isLoading||null!=dataSource&&dataSource.length?null==dataSource?void 0:dataSource.map((function(item,index){return __jsx(Item,(0,esm_extends.Z)({},item,{key:index}))})):Array(pageSize).fill("").map((function(i,index){return __jsx(react_content_loader_es.ZP,{key:index,speed:2,className:"py-4 border-b border-b-xwhite-op10",height:85,width:343,backgroundColor:"#FEFEFE",backgroundOpacity:.03,foregroundColor:"#2C2C48",foregroundOpacity:.01},__jsx("rect",{x:"0",y:"14",rx:"2",ry:"2",width:"40",height:"40"}),__jsx("rect",{x:"52",y:"0",rx:"2",ry:"2",width:"120",height:"16"}),__jsx("rect",{x:"52",y:"28",rx:"2",ry:"2",width:"80",height:"12"}),__jsx("rect",{x:"303",y:"0",rx:"2",ry:"2",width:"40",height:"16"}),__jsx("rect",{x:"263",y:"26",rx:"2",ry:"2",width:"80",height:"16"}))})),needPager&&__jsx(pager.u,{pageCnt,onPageChange,className:"mt-4 justify-center"}))}HistoryTableMobile.displayName="HistoryTableMobile";try{HistoryTableMobile.displayName="HistoryTableMobile",HistoryTableMobile.__docgenInfo={description:"",displayName:"HistoryTableMobile",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},pageSize:{defaultValue:null,description:"",name:"pageSize",required:!0,type:{name:"number"}},dataSource:{defaultValue:null,description:"",name:"dataSource",required:!0,type:{name:"T[]"}},needPager:{defaultValue:null,description:"",name:"needPager",required:!1,type:{name:"boolean"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!1,type:{name:"boolean"}},rowClassName:{defaultValue:null,description:"",name:"rowClassName",required:!1,type:{name:"string | ((row: any) => string)"}},showHeader:{defaultValue:null,description:"",name:"showHeader",required:!1,type:{name:"boolean"}},pageCnt:{defaultValue:{value:"0"},description:"",name:"pageCnt",required:!1,type:{name:"number"}},onPageChange:{defaultValue:null,description:"",name:"onPageChange",required:!0,type:{name:"(page: number) => void"}},item:{defaultValue:null,description:"",name:"item",required:!0,type:{name:"FC<T>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/table/PageTable/history-h5.tsx#HistoryTableMobile"]={docgenInfo:HistoryTableMobile.__docgenInfo,name:"HistoryTableMobile",path:"src/components/table/PageTable/history-h5.tsx#HistoryTableMobile"})}catch(__react_docgen_typescript_loader_error){}var next_router=__webpack_require__("./node_modules/next/router.js"),history_web_jsx=react.createElement,TableHeader=function TableHeader(_ref){var columns=_ref.columns,_ref$showHeader=_ref.showHeader;return void 0===_ref$showHeader||_ref$showHeader?history_web_jsx("thead",null,history_web_jsx("tr",{className:"border-b border-b-xwhite-op10 border-t-2 border-t-xwhite-op20 h-12"},null==columns?void 0:columns.map((function(item){return history_web_jsx("th",{key:item.dataKey,className:"text-xwhite-op60 font-poppins font-xextrabold p-4 px-0 first:pl-0 last:pr-0 leading-none ".concat(item.className),colSpan:item.titleColSpan,style:{width:item.width,textAlign:item.align}},item.title)})))):null};function TableRowCell(_ref2){var columns=_ref2.columns,dataSource=_ref2.dataSource,rowClassName=_ref2.rowClassName,isLoading=_ref2.isLoading,pageSize=_ref2.pageSize,router=(0,next_router.useRouter)();return history_web_jsx("tbody",null,isLoading?Array(pageSize).fill("").map((function(i,index){return history_web_jsx("tr",{key:index},null==columns?void 0:columns.map((function(item){return history_web_jsx("td",{style:{textAlign:item.align},className:"border-b border-b-xwhite-op10",key:item.dataKey},history_web_jsx(react_content_loader_es.ZP,{speed:2,uniqueKey:"uniqueKey",className:"inline-block",backgroundColor:"#FEFEFE",height:64,width:80,backgroundOpacity:.03,foregroundColor:"#2C2C48",foregroundOpacity:.01},history_web_jsx("rect",{x:"0",y:"24",rx:"2",ry:"2",width:"100%",height:"16"})))})))})):null==dataSource?void 0:dataSource.map((function(rowDataItem,index){return history_web_jsx("tr",{key:index,className:"border-b border-b-xwhite-op10 hover:bg-xwhite-op05 ".concat("string"==typeof rowClassName?rowClassName:null==rowClassName?void 0:rowClassName(rowDataItem))},null==columns?void 0:columns.map((function(item){return history_web_jsx("td",{key:item.dataKey,style:{width:item.width,textAlign:item.align},className:"text-base text-xwhite/60 font-poppins font-xmedium p-4 px-0 first:pl-0 last:pr-0"},history_web_jsx("div",{className:"w-full h-full flex items-center"},item.render(rowDataItem[item.dataKey],rowDataItem,index,router)))})))})))}function Table(_ref3){var columns=_ref3.columns,dataSource=_ref3.dataSource,isLoading=_ref3.isLoading,needPager=_ref3.needPager,rowClassName=_ref3.rowClassName,_ref3$pageCnt=_ref3.pageCnt,pageCnt=void 0===_ref3$pageCnt?0:_ref3$pageCnt,pageSize=_ref3.pageSize,_ref3$showHeader=_ref3.showHeader,showHeader=void 0===_ref3$showHeader||_ref3$showHeader,onPageChange=_ref3.onPageChange;return history_web_jsx(react.Fragment,null,history_web_jsx("table",{className:"w-full font-base text-white/60"},history_web_jsx(TableHeader,{showHeader,columns}),history_web_jsx(TableRowCell,{pageSize,rowClassName,columns,dataSource,isLoading})),needPager&&history_web_jsx("div",{className:"w-full flex flex-col items-center mt-4"},history_web_jsx(components.uE,{pageCnt,onPageChange})))}TableRowCell.displayName="TableRowCell";try{Table.displayName="Table",Table.__docgenInfo={description:"",displayName:"Table",props:{columns:{defaultValue:null,description:"",name:"columns",required:!0,type:{name:"IColumnProps<any>[]"}},dataSource:{defaultValue:null,description:"",name:"dataSource",required:!0,type:{name:"T[]"}},needPager:{defaultValue:null,description:"",name:"needPager",required:!1,type:{name:"boolean"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},rowClassName:{defaultValue:null,description:"",name:"rowClassName",required:!1,type:{name:"string | ((row: any) => string)"}},showHeader:{defaultValue:{value:"true"},description:"",name:"showHeader",required:!1,type:{name:"boolean"}},pageSize:{defaultValue:null,description:"",name:"pageSize",required:!0,type:{name:"number"}},pageCnt:{defaultValue:{value:"0"},description:"",name:"pageCnt",required:!1,type:{name:"number"}},onPageChange:{defaultValue:null,description:"",name:"onPageChange",required:!0,type:{name:"(page: number) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/table/PageTable/history-web.tsx#Table"]={docgenInfo:Table.__docgenInfo,name:"Table",path:"src/components/table/PageTable/history-web.tsx#Table"})}catch(__react_docgen_typescript_loader_error){}var PageTable_jsx=react.createElement;function PageTable(_ref){var _ref$pageSize=_ref.pageSize,pageSize=void 0===_ref$pageSize?5:_ref$pageSize,_ref$cacheKey=_ref.cacheKey,cacheKey=void 0===_ref$cacheKey?"cacheKey":_ref$cacheKey,getPageData=_ref.getPageData,needLogin=_ref.needLogin,columns=_ref.columns,_ref$emptyText=_ref.emptyText,emptyText=void 0===_ref$emptyText?"No Data":_ref$emptyText,H5ItemRow=_ref.H5ItemRow,userInfo=(0,contexts.bN)().userInfo,_useRafState=es_useRafState(0),_useRafState2=(0,slicedToArray.Z)(_useRafState,2),page=_useRafState2[0],setPageIdx=_useRafState2[1],_useState=(0,react.useState)(5),total=_useState[0],setTotal=_useState[1],_useState2=(0,react.useState)([]),list=_useState2[0],setList=_useState2[1],_useState3=(0,react.useState)(!0),isLoading=_useState3[0],setLoading=_useState3[1],pageCnt=(0,react.useMemo)((function(){return Math.floor((total-1)/pageSize)+1}),[pageSize,total]),_useState4=(0,react.useState)({}),listMap=_useState4[0],setListMap=_useState4[1];(0,useDebounceEffect.Z)((function(){var _listMap$cacheKey;if(!needLogin||userInfo.isLogin){var cacheList=null===(_listMap$cacheKey=listMap[cacheKey])||void 0===_listMap$cacheKey?void 0:_listMap$cacheKey[page];cacheList?setList(cacheList):getPageData&&(setLoading(!0),getPageData(page,pageSize).then((function(res){if(res){var data=res.data,total=res.total;setListMap((function(p){return p[cacheKey]||(p[cacheKey]={}),p[cacheKey][page]=data,p})),setList(data),setTotal(total),setLoading(!1)}else setList([])})).catch((function(){setTotal(0),setLoading(!1)})))}}),[cacheKey,getPageData,listMap,page,pageSize,needLogin,userInfo.isLogin],{wait:100,trailing:!1,leading:!0});var isEmptyTable=!total||needLogin&&!userInfo.isLogin,needPager=total>5;return isEmptyTable?PageTable_jsx(Empty.Z,{type:"data",text:emptyText}):PageTable_jsx(react.Fragment,null,PageTable_jsx(components.ph,null,PageTable_jsx(Table,{pageSize,dataSource:list,needPager,onPageChange:setPageIdx,pageCnt,columns:columns||[],isLoading})),PageTable_jsx(components.H5,null,PageTable_jsx(HistoryTableMobile,{pageSize,item:H5ItemRow,onPageChange:setPageIdx,dataSource:list,isLoading,needPager,pageCnt})))}try{PageTable.displayName="PageTable",PageTable.__docgenInfo={description:"",displayName:"PageTable",props:{columns:{defaultValue:null,description:"",name:"columns",required:!0,type:{name:"IColumnProps<any>[]"}},cacheKey:{defaultValue:{value:"cacheKey"},description:"",name:"cacheKey",required:!1,type:{name:"string"}},emptyText:{defaultValue:{value:"No Data"},description:"",name:"emptyText",required:!1,type:{name:"string"}},needLogin:{defaultValue:null,description:"",name:"needLogin",required:!1,type:{name:"boolean"}},H5ItemRow:{defaultValue:null,description:"",name:"H5ItemRow",required:!0,type:{name:"FC<T>"}},pageSize:{defaultValue:{value:"5"},description:"",name:"pageSize",required:!1,type:{name:"number"}},getPageData:{defaultValue:null,description:"",name:"getPageData",required:!1,type:{name:"((page: number, pageSize: number) => Promise<{ total: number; data: T[]; } | null>)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/table/PageTable/index.tsx#PageTable"]={docgenInfo:PageTable.__docgenInfo,name:"PageTable",path:"src/components/table/PageTable/index.tsx#PageTable"})}catch(__react_docgen_typescript_loader_error){}var XS_Empty=__webpack_require__("./src/packages/XS-Empty/index.tsx"),history_h5_jsx=react.createElement;function history_h5_HistoryTableMobile(_ref){var dataSource=_ref.dataSource,_ref$pageCnt=_ref.pageCnt,pageCnt=void 0===_ref$pageCnt?0:_ref$pageCnt,needPager=_ref.needPager,Item=_ref.item,isLoading=_ref.isLoading,pageSize=_ref.pageSize,onPageChange=_ref.onPageChange;return history_h5_jsx("div",{className:"w-[100%] border-t-2 border-solid border-xwhite-op20"},!isLoading||null!=dataSource&&dataSource.length?null==dataSource?void 0:dataSource.map((function(item,index){return history_h5_jsx(Item,(0,esm_extends.Z)({},item,{key:index}))})):Array(pageSize).fill("").map((function(i,index){return history_h5_jsx(react_content_loader_es.ZP,{key:index,speed:2,className:"py-4 border-b border-b-xwhite-op10",height:85,width:343,backgroundColor:"#FEFEFE",backgroundOpacity:.03,foregroundColor:"#2C2C48",foregroundOpacity:.01},history_h5_jsx("rect",{x:"0",y:"14",rx:"2",ry:"2",width:"40",height:"40"}),history_h5_jsx("rect",{x:"52",y:"0",rx:"2",ry:"2",width:"120",height:"16"}),history_h5_jsx("rect",{x:"52",y:"28",rx:"2",ry:"2",width:"80",height:"12"}),history_h5_jsx("rect",{x:"303",y:"0",rx:"2",ry:"2",width:"40",height:"16"}),history_h5_jsx("rect",{x:"263",y:"26",rx:"2",ry:"2",width:"80",height:"16"}))})),needPager&&history_h5_jsx(pager.u,{pageCnt,onPageChange,className:"mt-4 justify-center"}))}history_h5_HistoryTableMobile.displayName="HistoryTableMobile";try{history_h5_HistoryTableMobile.displayName="HistoryTableMobile",history_h5_HistoryTableMobile.__docgenInfo={description:"",displayName:"HistoryTableMobile",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},pageSize:{defaultValue:null,description:"",name:"pageSize",required:!0,type:{name:"number"}},dataSource:{defaultValue:null,description:"",name:"dataSource",required:!0,type:{name:"T[]"}},needPager:{defaultValue:null,description:"",name:"needPager",required:!1,type:{name:"boolean"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!1,type:{name:"boolean"}},rowClassName:{defaultValue:null,description:"",name:"rowClassName",required:!1,type:{name:"string | ((row: any) => string)"}},showHeader:{defaultValue:null,description:"",name:"showHeader",required:!1,type:{name:"boolean"}},pageCnt:{defaultValue:{value:"0"},description:"",name:"pageCnt",required:!1,type:{name:"number"}},onPageChange:{defaultValue:null,description:"",name:"onPageChange",required:!0,type:{name:"(page: number) => void"}},item:{defaultValue:null,description:"",name:"item",required:!0,type:{name:"FC<T>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/packages/XS-Table/history-h5.tsx#HistoryTableMobile"]={docgenInfo:history_h5_HistoryTableMobile.__docgenInfo,name:"HistoryTableMobile",path:"src/packages/XS-Table/history-h5.tsx#HistoryTableMobile"})}catch(__react_docgen_typescript_loader_error){}var XS_Table_history_web_jsx=react.createElement,history_web_TableHeader=function TableHeader(_ref){var columns=_ref.columns,_ref$showHeader=_ref.showHeader;return void 0===_ref$showHeader||_ref$showHeader?XS_Table_history_web_jsx("thead",null,XS_Table_history_web_jsx("tr",{className:"border-b border-b-xwhite-op10 border-t-2 border-t-xwhite-op20 h-12"},null==columns?void 0:columns.map((function(item){return XS_Table_history_web_jsx("th",{key:item.dataKey,className:"text-xwhite-op60 font-poppins font-xextrabold p-4 px-0 first:pl-0 last:pr-0 leading-none ".concat(item.className),colSpan:item.titleColSpan,style:{width:item.width,textAlign:item.align}},item.title)})))):null};function history_web_TableRowCell(_ref2){var columns=_ref2.columns,dataSource=_ref2.dataSource,rowClassName=_ref2.rowClassName,isLoading=_ref2.isLoading,pageSize=_ref2.pageSize,router=(0,next_router.useRouter)();return XS_Table_history_web_jsx("tbody",null,isLoading?Array(pageSize).fill("").map((function(i,index){return XS_Table_history_web_jsx("tr",{key:index},null==columns?void 0:columns.map((function(item){return XS_Table_history_web_jsx("td",{style:{textAlign:item.align},className:"border-b border-b-xwhite-op10",key:item.dataKey},XS_Table_history_web_jsx(react_content_loader_es.ZP,{speed:2,uniqueKey:"uniqueKey",className:"inline-block",backgroundColor:"#FEFEFE",height:64,width:80,backgroundOpacity:.03,foregroundColor:"#2C2C48",foregroundOpacity:.01},XS_Table_history_web_jsx("rect",{x:"0",y:"24",rx:"2",ry:"2",width:"100%",height:"16"})))})))})):null==dataSource?void 0:dataSource.map((function(rowDataItem,index){return XS_Table_history_web_jsx("tr",{key:index,className:"border-b border-b-xwhite-op10 hover:bg-xwhite-op05 ".concat("string"==typeof rowClassName?rowClassName:null==rowClassName?void 0:rowClassName(rowDataItem))},null==columns?void 0:columns.map((function(item){return XS_Table_history_web_jsx("td",{key:item.dataKey,style:{width:item.width,textAlign:item.align},className:"text-base text-xwhite/60 font-poppins font-xmedium p-4 px-0 first:pl-0 last:pr-0"},XS_Table_history_web_jsx("div",{className:"w-full h-full flex items-center"},item.render(rowDataItem[item.dataKey],rowDataItem,index,router)))})))})))}function history_web_Table(_ref3){var columns=_ref3.columns,dataSource=_ref3.dataSource,isLoading=_ref3.isLoading,needPager=_ref3.needPager,rowClassName=_ref3.rowClassName,_ref3$pageCnt=_ref3.pageCnt,pageCnt=void 0===_ref3$pageCnt?0:_ref3$pageCnt,pageSize=_ref3.pageSize,_ref3$showHeader=_ref3.showHeader,showHeader=void 0===_ref3$showHeader||_ref3$showHeader,onPageChange=_ref3.onPageChange;return XS_Table_history_web_jsx(react.Fragment,null,XS_Table_history_web_jsx("table",{className:"w-full font-base text-white/60"},XS_Table_history_web_jsx(history_web_TableHeader,{showHeader,columns}),XS_Table_history_web_jsx(history_web_TableRowCell,{pageSize,rowClassName,columns,dataSource,isLoading})),needPager&&XS_Table_history_web_jsx("div",{className:"w-full flex flex-col items-center mt-4"},XS_Table_history_web_jsx(components.uE,{pageCnt,onPageChange})))}history_web_TableRowCell.displayName="TableRowCell";try{history_web_Table.displayName="Table",history_web_Table.__docgenInfo={description:"",displayName:"Table",props:{columns:{defaultValue:null,description:"",name:"columns",required:!0,type:{name:"IColumnProps<any>[]"}},dataSource:{defaultValue:null,description:"",name:"dataSource",required:!0,type:{name:"T[]"}},needPager:{defaultValue:null,description:"",name:"needPager",required:!1,type:{name:"boolean"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},rowClassName:{defaultValue:null,description:"",name:"rowClassName",required:!1,type:{name:"string | ((row: any) => string)"}},showHeader:{defaultValue:{value:"true"},description:"",name:"showHeader",required:!1,type:{name:"boolean"}},pageSize:{defaultValue:null,description:"",name:"pageSize",required:!0,type:{name:"number"}},pageCnt:{defaultValue:{value:"0"},description:"",name:"pageCnt",required:!1,type:{name:"number"}},onPageChange:{defaultValue:null,description:"",name:"onPageChange",required:!0,type:{name:"(page: number) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/packages/XS-Table/history-web.tsx#Table"]={docgenInfo:history_web_Table.__docgenInfo,name:"Table",path:"src/packages/XS-Table/history-web.tsx#Table"})}catch(__react_docgen_typescript_loader_error){}var XS_Table_jsx=react.createElement,XSTable=function XSTable(_ref){var _ref$pageSize=_ref.pageSize,pageSize=void 0===_ref$pageSize?5:_ref$pageSize,_ref$cacheKey=_ref.cacheKey,cacheKey=void 0===_ref$cacheKey?"cacheKey":_ref$cacheKey,getPageData=_ref.getPageData,needLogin=_ref.needLogin,columns=_ref.columns,_ref$emptyText=_ref.emptyText,emptyText=void 0===_ref$emptyText?"No Data":_ref$emptyText,H5ItemRow=_ref.H5ItemRow,userInfo=(0,contexts.bN)().userInfo,_useRafState=es_useRafState(0),_useRafState2=(0,slicedToArray.Z)(_useRafState,2),page=_useRafState2[0],setPageIdx=_useRafState2[1],_useState=(0,react.useState)(5),total=_useState[0],setTotal=_useState[1],_useState2=(0,react.useState)([]),list=_useState2[0],setList=_useState2[1],_useState3=(0,react.useState)(!0),isLoading=_useState3[0],setLoading=_useState3[1],pageCnt=(0,react.useMemo)((function(){return Math.floor((total-1)/pageSize)+1}),[pageSize,total]),_useState4=(0,react.useState)({}),listMap=_useState4[0],setListMap=_useState4[1];(0,useDebounceEffect.Z)((function(){var _listMap$cacheKey;if(!needLogin||userInfo.isLogin){var cacheList=null===(_listMap$cacheKey=listMap[cacheKey])||void 0===_listMap$cacheKey?void 0:_listMap$cacheKey[page];cacheList?setList(cacheList):getPageData&&(setLoading(!0),getPageData(page,pageSize).then((function(res){if(res){var data=res.data,total=res.total;setListMap((function(p){return p[cacheKey]||(p[cacheKey]={}),p[cacheKey][page]=data,p})),setList(data),setTotal(total),setLoading(!1)}else setList([])})).catch((function(){setTotal(0),setLoading(!1)})))}}),[cacheKey,getPageData,listMap,page,pageSize,needLogin,userInfo.isLogin],{wait:100,trailing:!1,leading:!0});var isEmptyTable=!total||needLogin&&!userInfo.isLogin,needPager=total>5;return isEmptyTable?XS_Table_jsx(XS_Empty.Z,{text:emptyText}):XS_Table_jsx(react.Fragment,null,XS_Table_jsx(components.ph,null,XS_Table_jsx(history_web_Table,{pageSize,dataSource:list,needPager,onPageChange:setPageIdx,pageCnt,columns:columns||[],isLoading})),XS_Table_jsx(components.H5,null,XS_Table_jsx(history_h5_HistoryTableMobile,{pageSize,item:H5ItemRow,onPageChange:setPageIdx,dataSource:list,isLoading,needPager,pageCnt})))};const XS_Table=XSTable;try{XSTable.displayName="XSTable",XSTable.__docgenInfo={description:"",displayName:"XSTable",props:{columns:{defaultValue:null,description:"",name:"columns",required:!0,type:{name:"IColumnProps<any>[]"}},cacheKey:{defaultValue:{value:"cacheKey"},description:"",name:"cacheKey",required:!1,type:{name:"string"}},emptyText:{defaultValue:{value:"No Data"},description:"没有数据展示的文案",name:"emptyText",required:!1,type:{name:"string"}},needLogin:{defaultValue:null,description:"数据是否依赖登录态，如果依赖且未登录，会直接返回",name:"needLogin",required:!1,type:{name:"boolean"}},H5ItemRow:{defaultValue:null,description:"H5 组件的自定义展示",name:"H5ItemRow",required:!0,type:{name:"FC<T>"}},pageSize:{defaultValue:{value:"5"},description:"每一页展示的数量",name:"pageSize",required:!1,type:{name:"number"}},getPageData:{defaultValue:null,description:"数据加载的接口\n@param page 需要加载的数据分页\n@param pageSize",name:"getPageData",required:!1,type:{name:"((page: number, pageSize: number) => Promise<{ total: number; data: T[]; } | null>)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/packages/XS-Table/index.tsx#XSTable"]={docgenInfo:XSTable.__docgenInfo,name:"XSTable",path:"src/packages/XS-Table/index.tsx#XSTable"})}catch(__react_docgen_typescript_loader_error){}var service=__webpack_require__("./src/pages/fans/service.ts"),config=__webpack_require__("./src/common/config/index.ts"),dappType=__webpack_require__("./src/common/lib/dappType.ts"),utils=__webpack_require__("./src/common/utils/index.ts"),pluralize=__webpack_require__("./src/common/utils/pluralize.ts"),xterio_icons_esm=__webpack_require__("./node_modules/xterio-icons/dist/xterio-icons.esm.js"),activity_table_mobile_row_jsx=react.createElement,HistoryTableMobileRow=function HistoryTableMobileRow(_ref){var network=_ref.network,address=_ref.address,tx_hash=_ref.tx_hash,payment_token_address=_ref.payment_token_address,amount=_ref.amount,price=_ref.price,timestamp=_ref.timestamp,event=_ref.event,tokenMetaData=(0,config.de)(network,payment_token_address),priceBigNumber=dappType.O$.from(price),priceStr="".concat((0,utils.ij)(priceBigNumber,tokenMetaData.decimal)," ").concat(tokenMetaData.symbol);return activity_table_mobile_row_jsx("div",{className:"border-b-[1px] border-solid border-xwhite-op10 py-4 flex flex-wrap gap-y-3 leading-none"},activity_table_mobile_row_jsx("p",{className:"w-2/3 odd:w-1/3 text-right odd:text-left flex items-center"},"BURN"===event?"Burn":"Mint",activity_table_mobile_row_jsx("span",{className:"text-xwhite/40 ml-1.5 font-poppins text-x-xs p-[1px] border border-xwhite/40"},(0,pluralize.Z)("Shard",amount))),activity_table_mobile_row_jsx("p",{className:"w-2/3 odd:w-1/3 text-right odd:text-left font-xextrabold"},priceStr),activity_table_mobile_row_jsx("p",{className:"w-2/3 odd:w-1/3 text-right odd:text-left"},activity_table_mobile_row_jsx("a",{href:(0,utils.lr)(address,network),className:"group inline-flex justify-end items-center text-xwhite-op60 hover:underline bg-xwhite/10 rounded-[14px] px-2 py-[3px]",rel:"noreferrer",target:"_blank"},activity_table_mobile_row_jsx("span",{className:"whitespace-nowrap text-x-xs"},(0,utils.vD)(address,2)),activity_table_mobile_row_jsx(xterio_icons_esm.IconDirection12,{className:"-rotate-[135deg] text-x-base ml-1"}))),activity_table_mobile_row_jsx("p",{className:"w-2/3 odd:w-1/3 text-right odd:text-left"},activity_table_mobile_row_jsx("a",{href:(0,utils.km)(tx_hash,network),className:"group inline-flex justify-end items-center text-xwhite-op60  bg-xwhite/10 rounded-[14px] px-2 py-[3px]",rel:"noreferrer",target:"_blank"},activity_table_mobile_row_jsx("span",{className:"whitespace-nowrap text-x-xs"},(0,utils.vs)(1e3*timestamp,"YYYY-MM-DD",!1).trim()," ",(0,utils.vs)(1e3*timestamp,"HH:mm",!1).trim()+"(UTC)"),activity_table_mobile_row_jsx(xterio_icons_esm.IconDirection12,{className:"-rotate-[135deg] text-x-base  ml-1"}))))};HistoryTableMobileRow.displayName="HistoryTableMobileRow";try{HistoryTableMobileRow.displayName="HistoryTableMobileRow",HistoryTableMobileRow.__docgenInfo={description:"",displayName:"HistoryTableMobileRow",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},app_id:{defaultValue:null,description:"",name:"app_id",required:!0,type:{name:"string"}},network:{defaultValue:null,description:"",name:"network",required:!0,type:{name:"enum",value:[{value:'"ETHEREUM"'},{value:'"BSC"'},{value:'"OPBNB"'},{value:'"ARBITRUM"'},{value:'"POLYGON"'},{value:'"XTERIO"'},{value:'"BASE"'},{value:'"GOERLI"'},{value:'"SEPOLIA"'},{value:'"BSC_TESTNET"'},{value:'"OPBNB_TESTNET"'},{value:'"XTERIO_TESTNET"'}]}},contract_address:{defaultValue:null,description:"",name:"contract_address",required:!0,type:{name:"string"}},work_id:{defaultValue:null,description:"",name:"work_id",required:!0,type:{name:"number"}},address:{defaultValue:null,description:"",name:"address",required:!0,type:{name:"string"}},account_id:{defaultValue:null,description:"",name:"account_id",required:!0,type:{name:"string"}},event:{defaultValue:null,description:"",name:"event",required:!0,type:{name:"enum",value:[{value:'"MINT"'},{value:'"BURN"'}]}},amount:{defaultValue:null,description:"",name:"amount",required:!0,type:{name:"number"}},price:{defaultValue:null,description:"",name:"price",required:!0,type:{name:"string"}},payment_token_address:{defaultValue:null,description:"",name:"payment_token_address",required:!0,type:{name:"string"}},timestamp:{defaultValue:null,description:"",name:"timestamp",required:!0,type:{name:"number"}},tx_hash:{defaultValue:null,description:"",name:"tx_hash",required:!0,type:{name:"string"}},block_hash:{defaultValue:null,description:"",name:"block_hash",required:!0,type:{name:"string"}},work_meta:{defaultValue:null,description:"",name:"work_meta",required:!0,type:{name:"{ name: string; work_id: number; description: string; media: [{ type: string; url: string; }]; app_id: string; payment_token_address: string; attributes: [{ k: string; name: string; value: string; type: string; icon: string; trait_type: string; }]; }"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/pages/fans/works/components/Activity/activity-table-mobile-row.tsx#HistoryTableMobileRow"]={docgenInfo:HistoryTableMobileRow.__docgenInfo,name:"HistoryTableMobileRow",path:"src/pages/fans/works/components/Activity/activity-table-mobile-row.tsx#HistoryTableMobileRow"})}catch(__react_docgen_typescript_loader_error){}var classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),columns_jsx=react.createElement;const columns=[{dataKey:"event",title:"Event",align:"left",className:"w-[180px]",width:180,render:function render(value){return columns_jsx("span",{className:"line-clamp-3 inline-block pr-4 box-border break-all text-xwhite/60"},"BURN"===value?"Burn":"Mint")}},{dataKey:"price",title:"Price",align:"left",width:200,className:"",render:function render(value,_ref){var network=_ref.network,payment_token_address=_ref.payment_token_address,tokenMetaData=(0,config.de)(network,payment_token_address),priceBigNumber=dappType.O$.from(value),price=(0,utils.ij)(priceBigNumber,tokenMetaData.decimal);return columns_jsx("span",{className:"line-clamp-3 inline-block pr-4 box-border break-all text-xwhite/60"},"".concat(price," ").concat(tokenMetaData.symbol))}},{dataKey:"amount",title:"Quantity",align:"left",width:300,className:"",render:function render(value){return columns_jsx("span",{className:"line-clamp-3 inline-block pr-4 box-border break-all text-xwhite/60"},value)}},{dataKey:"address",title:"Address",align:"left",width:280,className:"",render:function render(value,_ref2){var network=_ref2.network,href=(0,utils.lr)(value,network);return columns_jsx("span",{onClick:function onClick(){return href&&window.open(href,"_blank")},className:"line-clamp-3 inline-block pr-4 web:hover:underline box-border break-all text-xwhite/60 cursor-pointer"},(0,utils.vD)(value,2))}},{dataKey:"timestamp",title:"Date",align:"right",width:240,className:"w-full",render:function render(value,_ref3){var tx_hash=_ref3.tx_hash,network=_ref3.network,href=tx_hash?(0,utils.km)(tx_hash,network):null;return columns_jsx("span",{onClick:function onClick(){return href&&window.open(href,"_blank")},className:classnames_default()("inline-block group text-right line-clamp-2 w-[240px] text-xwhite-op60 overflow-hidden break-all",href?"hover:underline cursor-pointer":"cursor-default")},(0,utils.vs)(1e3*value,"YYYY-MM-DD",!1).trim()," ",(0,utils.vs)(1e3*value,"HH:mm",!1).trim()+"(UTC)",columns_jsx(xterio_icons_esm.IconDirection16,{className:"inline-block -rotate-[135deg] ml-1 text-x-base group-hover:-rotate-90 duration-200"}))}}];var index_stories_jsx=react.createElement;const index_stories={title:"Base/XS-Table",component:XS_Table,parameters:{layout:"centered"},tags:["autodocs"]};var Template=function Template(args){var getPageData=(0,react.useCallback)(function(){var _ref=(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee(pageNo){return regenerator_default().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.abrupt("return",(0,service.Ol)({offset:5*pageNo,limit:5,work_id:[377]}));case 1:case"end":return _context.stop()}}),_callee)})));return function(_x){return _ref.apply(this,arguments)}}(),[377]);return index_stories_jsx(PageTable,(0,esm_extends.Z)({pageSize:5,getPageData,cacheKey:"works-activity-".concat(377),columns,H5ItemRow:HistoryTableMobileRow,emptyText:"No Activity"},args))};Template.displayName="Template",Template.parameters={...Template.parameters,docs:{...Template.parameters?.docs,source:{originalSource:'(args: any) => {\n  const PageSize = 5;\n  const worksId = 377;\n  const getPageData = useCallback(async (pageNo: number) => {\n    return getWorksActivities({\n      offset: PageSize * pageNo,\n      limit: PageSize,\n      work_id: [+worksId]\n    });\n  }, [worksId]);\n  return <PageTable<IWorksActivityItem> pageSize={PageSize} getPageData={getPageData} cacheKey={`works-activity-${worksId}`} columns={columns} H5ItemRow={HistoryTableMobileRow} emptyText="No Activity" {...args} />;\n}',...Template.parameters?.docs?.source}}};const __namedExportsOrder=["Template"];try{Template.displayName="Template",Template.__docgenInfo={description:"",displayName:"Template",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/packages/XS-Table/index.stories.tsx#Template"]={docgenInfo:Template.__docgenInfo,name:"Template",path:"src/packages/XS-Table/index.stories.tsx#Template"})}catch(__react_docgen_typescript_loader_error){}},"./src/packages/XS-Empty/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _Users_visor_Documents_code_libecc_xterio_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__),src_hooks__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/hooks/index.ts"),xterio_icons__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/xterio-icons/dist/xterio-icons.esm.js"),__jsx=react__WEBPACK_IMPORTED_MODULE_0__.createElement,XSEmpty=function XSEmpty(_ref){var _ref$text=_ref.text,text=void 0===_ref$text?"No Data":_ref$text,_ref$showIcon=_ref.showIcon,showIcon=void 0===_ref$showIcon||_ref$showIcon,_ref$iconSize=_ref.iconSize,iconSize=void 0===_ref$iconSize?80:_ref$iconSize,_ref$Icon=_ref.Icon,Icon=void 0===_ref$Icon?xterio_icons__WEBPACK_IMPORTED_MODULE_3__.IconNodata80:_ref$Icon,height=_ref.height,_ref$width=_ref.width,width=void 0===_ref$width?"100%":_ref$width,className=_ref.className,_useResponsive=(0,src_hooks__WEBPACK_IMPORTED_MODULE_2__.Fs)("md"),isLargerThanMD=(0,_Users_visor_Documents_code_libecc_xterio_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_4__.Z)(_useResponsive,1)[0];return __jsx("div",{style:{height:height||(isLargerThanMD&&showIcon?540:240),width},className:classnames__WEBPACK_IMPORTED_MODULE_1___default()("flex flex-col items-center justify-center",className)},showIcon?__jsx(Icon,{className:"text-xwhite/20 mb-4",size:iconSize}):null,__jsx("span",{className:classnames__WEBPACK_IMPORTED_MODULE_1___default()("text-xwhite/30 font-termina font-medium text-x-sm"),dangerouslySetInnerHTML:{__html:text}}))};XSEmpty.displayName="XSEmpty";const __WEBPACK_DEFAULT_EXPORT__=XSEmpty;try{XSEmpty.displayName="XSEmpty",XSEmpty.__docgenInfo={description:"",displayName:"XSEmpty",props:{text:{defaultValue:{value:"No Data"},description:"提示文字",name:"text",required:!1,type:{name:"string"}},showIcon:{defaultValue:{value:"true"},description:"是否展示图标",name:"showIcon",required:!1,type:{name:"boolean"}},iconSize:{defaultValue:{value:"80"},description:"图标大小",name:"iconSize",required:!1,type:{name:"number"}},Icon:{defaultValue:null,description:"自定义图标",name:"Icon",required:!1,type:{name:"Icon"}},height:{defaultValue:null,description:"自定义高度",name:"height",required:!1,type:{name:"number"}},width:{defaultValue:{value:"100%"},description:"自定义宽度",name:"width",required:!1,type:{name:"number"}},className:{defaultValue:null,description:"自定义样式",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/packages/XS-Empty/index.tsx#XSEmpty"]={docgenInfo:XSEmpty.__docgenInfo,name:"XSEmpty",path:"src/packages/XS-Empty/index.tsx#XSEmpty"})}catch(__react_docgen_typescript_loader_error){}}}]);