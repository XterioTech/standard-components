(self.webpackChunkxterio=self.webpackChunkxterio||[]).push([[614],{"./src/common/lib/asynModule/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{MetamaskWalletModal:()=>MetamaskWalletModal,OKXWalletModal:()=>OKXWalletModal,SafepalWalletModal:()=>SafepalWalletModal,TrustWalletModal:()=>TrustWalletModal,WcWalletModal:()=>WcWalletModal,ethers:()=>ethers});var ethers=__webpack_require__("./node_modules/ethers/lib.esm/ethers.js"),classCallCheck=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),createClass=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/createClass.js"),possibleConstructorReturn=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),getPrototypeOf=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),inherits=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/inherits.js"),asyncToGenerator=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),regenerator=__webpack_require__("./node_modules/@babel/runtime/regenerator/index.js"),regenerator_default=__webpack_require__.n(regenerator),lib=__webpack_require__("./node_modules/react-device-detect/dist/lib.js"),config=__webpack_require__("./src/common/config/index.ts"),type=__webpack_require__("./src/contexts/dapp-context/type.ts"),defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),web3_provider=__webpack_require__("./node_modules/@ethersproject/providers/lib.esm/web3-provider.js"),utils=__webpack_require__("./node_modules/ethers/lib/utils.js"),throttle=__webpack_require__("./node_modules/lodash-es/throttle.js"),js_cookie=__webpack_require__("./node_modules/js-cookie/dist/js.cookie.mjs"),fetchers=__webpack_require__("./src/fetchers/index.ts"),getOtacByTokens=function(){var _ref=(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee(){var access_token,id_token,refresh_token,res;return regenerator_default().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(access_token=js_cookie.Z.get("_access_token"),id_token=js_cookie.Z.get("_id_token"),refresh_token=js_cookie.Z.get("_refresh_token"),id_token&&refresh_token){_context.next=5;break}return _context.abrupt("return","");case 5:return _context.next=7,(0,fetchers.UT)("/auth/v1/otac",{access_token,id_token,refresh_token}).catch((function(){return{code:""}}));case 7:return res=_context.sent,_context.abrupt("return",(null==res?void 0:res.code)||"");case 9:case"end":return _context.stop()}}),_callee)})));return function getOtacByTokens(){return _ref.apply(this,arguments)}}(),storage=__webpack_require__("./src/common/utils/storage.ts"),dapp_context_const=__webpack_require__("./src/contexts/dapp-context/const.ts"),debounce=__webpack_require__("./node_modules/lodash-es/debounce.js");var isAccountsEqual=function isAccountsEqual(a,b){return(null==a?void 0:a.length)===(null==b?void 0:b.length)&&!(null!=a&&a.find((function(i,index){return i!==(null==b?void 0:b[index])})))},userInfo=__webpack_require__("./src/contexts/global-context/userInfo.ts"),hooks=__webpack_require__("./src/hooks/index.ts"),console=__webpack_require__("./node_modules/console-browserify/index.js");function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){(0,defineProperty.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var jumpToDownload=(0,throttle.Z)((function(url,schema,callback){schema?location.href=url:window.open(url),null==callback||callback()}),100,{leading:!1}),XterDappBaseModel=function(){return(0,createClass.Z)((function XterDappBaseModel(name,autoConnect){var _this=this;(0,classCallCheck.Z)(this,XterDappBaseModel),(0,defineProperty.Z)(this,"_otac",""),(0,defineProperty.Z)(this,"onAccountsChanged",void 0),(0,defineProperty.Z)(this,"onChainChanged",void 0),(0,defineProperty.Z)(this,"onDisConnect",void 0),(0,defineProperty.Z)(this,"onConnect",void 0),(0,defineProperty.Z)(this,"onBlockChanged",void 0),(0,defineProperty.Z)(this,"name",void 0),(0,defineProperty.Z)(this,"_library",void 0),(0,defineProperty.Z)(this,"_walletProvider",void 0),(0,defineProperty.Z)(this,"_chainId",void 0),(0,defineProperty.Z)(this,"_accounts",[]),(0,defineProperty.Z)(this,"_walletUrl",void 0),autoConnect&&this.init().then((function(){_this.connect()})),this._init(name)}),[{key:"_init",value:function _init(name){var _this2=this;this.name=name,[type.i.METAMASK,type.i.TRUST].includes(this.name)&&!this._otac&&this.setOtac(),userInfo.F.on("login",(function(){_this2.setOtac()}))}},{key:"library",get:function get(){return this._library},set:function set(p){var _this$onUpdate;p&&(null===(_this$onUpdate=this.onUpdate)||void 0===_this$onUpdate||_this$onUpdate.call(this,this),this._library=p)}},{key:"walletProvider",get:function get(){return this._walletProvider},set:function set(p){var _this$_removeAllListe;!p!=!this._walletProvider&&(this._walletProvider=p,this._walletProvider?(this.library=new web3_provider.Q(this._walletProvider,"any"),this._removeAllListener=function subscribeToProviderEvents(xterDappModel){var provider=null==xterDappModel?void 0:xterDappModel.walletProvider,library=null==xterDappModel?void 0:xterDappModel.library,onConnect=function onConnect(p){var _xterDappModel$_onCon;null===(_xterDappModel$_onCon=xterDappModel._onConnect)||void 0===_xterDappModel$_onCon||_xterDappModel$_onCon.call(xterDappModel)},onDisConnect=function onDisConnect(p){var _xterDappModel$_onDis;null===(_xterDappModel$_onDis=xterDappModel._onDisConnect)||void 0===_xterDappModel$_onDis||_xterDappModel$_onDis.call(xterDappModel)},onChainChanged=function onChainChanged(p){var _xterDappModel$_onCha;null===(_xterDappModel$_onCha=xterDappModel._onChainChanged)||void 0===_xterDappModel$_onCha||_xterDappModel$_onCha.call(xterDappModel,p)},onAccountsChanged=function onAccountsChanged(p){var _xterDappModel$_onAcc;null===(_xterDappModel$_onAcc=xterDappModel._onAccountsChanged)||void 0===_xterDappModel$_onAcc||_xterDappModel$_onAcc.call(xterDappModel,p)},onBlockChanged=(0,debounce.Z)((function(blockNumber){var _xterDappModel$_onBlo;null===(_xterDappModel$_onBlo=xterDappModel._onBlockChanged)||void 0===_xterDappModel$_onBlo||_xterDappModel$_onBlo.call(xterDappModel,blockNumber)}),100);if(provider.on){var _xterDappModel$wallet;provider.on("connect",onConnect),library&&library.on("block",onBlockChanged),provider.on("disconnect",onDisConnect),provider.on("chainChanged",onChainChanged),provider.on("accountsChanged",onAccountsChanged);var _removeListener=null==xterDappModel||null===(_xterDappModel$wallet=xterDappModel.walletProvider)||void 0===_xterDappModel$wallet?void 0:_xterDappModel$wallet._removeListener;return function(){_removeListener("connect",onConnect),library&&_removeListener("block",onBlockChanged),_removeListener("disconnect",onDisConnect),_removeListener("chainChanged",onChainChanged),_removeListener("accountsChanged",onAccountsChanged)}}return function(){}}(this)):null===(_this$_removeAllListe=this._removeAllListener)||void 0===_this$_removeAllListe||_this$_removeAllListe.call(this))}},{key:"state",get:function get(){return{chainId:this._chainId,accounts:this._accounts,account:this._accounts[0]||"",walletUrl:this._walletUrl}},set:function set(p){var _this$onUpdate2,needUpdate=!isAccountsEqual(this._accounts,p.accounts)||this._chainId!==p.chainId;this._accounts=(p.accounts||[]).map((function(i){return(0,utils.getAddress)(i)})),this._chainId=p.chainId,this._walletUrl=p.walletUrl,needUpdate&&(null===(_this$onUpdate2=this.onUpdate)||void 0===_this$onUpdate2||_this$onUpdate2.call(this,this))}},{key:"isConnected",get:function get(){var _this$_accounts;return!(null===(_this$_accounts=this._accounts)||void 0===_this$_accounts||!_this$_accounts.length)}},{key:"setOtac",value:(_setOtac=(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee(){return regenerator_default().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(this.library||!lib.tq){_context.next=4;break}return _context.next=3,getOtacByTokens();case 3:this._otac=_context.sent;case 4:case"end":return _context.stop()}}),_callee,this)}))),function setOtac(){return _setOtac.apply(this,arguments)})},{key:"throttleJump",value:function throttleJump(url,schema,callback){jumpToDownload(url,schema,callback)}},{key:"init",value:function init(force){return console.error("你需要重写 init"),Promise.resolve()}},{key:"connect",value:(_connect=(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee2(force){var chainId,accounts;return regenerator_default().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,this.init(force);case 2:if(!this.library){_context2.next=24;break}return(0,hooks.dO)("connectWalletClick",{wallet_name:this.name,page_title:location.pathname,force}),this.name&&(0,storage.po)(dapp_context_const.wN,this.name),_context2.prev=5,_context2.next=8,this.library.send("eth_chainId",[]).catch((function(e){return console.error("e===> eth_chainId error",e)}));case 8:return chainId=_context2.sent,_context2.next=11,this.library.send("eth_accounts",[]).catch((function(e){return console.error("e===> eth_accounts error",e)}));case 11:if(accounts=_context2.sent,!chainId||accounts.length||!force){_context2.next=16;break}return _context2.next=15,this.library.send("eth_requestAccounts",[]).catch((function(e){return console.error("e===> eth_requestAccounts error",e)}));case 15:accounts=_context2.sent;case 16:accounts=accounts||[],this.state={chainId:parseInt(chainId),accounts},_context2.next=24;break;case 20:_context2.prev=20,_context2.t0=_context2.catch(5),console.debug(_context2.t0),this.state={};case 24:return _context2.abrupt("return",this.state);case 25:case"end":return _context2.stop()}}),_callee2,this,[[5,20]])}))),function connect(_x){return _connect.apply(this,arguments)})},{key:"_onChainChanged",value:function _onChainChanged(_id){var _this$state;if(this.onChainChanged)return this.onChainChanged(_id);var chainId=parseInt("".concat(_id));chainId!==(null===(_this$state=this.state)||void 0===_this$state?void 0:_this$state.chainId)&&(this.state=_objectSpread(_objectSpread({},this.state),{},{chainId}))}},{key:"_onDisConnect",value:function _onDisConnect(){if(this.onDisConnect)return this.onDisConnect();this.state={}}},{key:"_onBlockChanged",value:function _onBlockChanged(p){var _this$onBlockChanged;return null===(_this$onBlockChanged=this.onBlockChanged)||void 0===_this$onBlockChanged?void 0:_this$onBlockChanged.call(this,p)}},{key:"_onConnect",value:function _onConnect(){if(this.onConnect)return this.onConnect()}},{key:"_onAccountsChanged",value:function _onAccountsChanged(p){if(this.onAccountsChanged)return this.onAccountsChanged(p);!isAccountsEqual(this.state.accounts,p)&&(this.state=_objectSpread(_objectSpread({},this.state),{},{accounts:p||[]}))}},{key:"disconnect",value:(_disconnect=(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee3(remove){var _this$onUpdate3,_this$walletProvider$,_this$walletProvider;return regenerator_default().wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:this._chainId=void 0,this._accounts=[],remove&&(this.library=void 0),this.name===type.i.WALLETCONNECT&&(null===(_this$walletProvider$=(_this$walletProvider=this.walletProvider).disconnect)||void 0===_this$walletProvider$||_this$walletProvider$.call(_this$walletProvider),this.library=void 0),null===(_this$onUpdate3=this.onUpdate)||void 0===_this$onUpdate3||_this$onUpdate3.call(this,this);case 5:case"end":return _context3.stop()}}),_callee3,this)}))),function disconnect(_x2){return _disconnect.apply(this,arguments)})},{key:"switchNetwork",value:(_switchNetwork=(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee4(targetChainID){var chainIdHexString,library,res,network;return regenerator_default().wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,this.init();case 2:if(this.library){_context4.next=4;break}return _context4.abrupt("return","error provider");case 4:if(chainIdHexString="0x"+targetChainID.toString(16),_context4.prev=5,library=this.library,res="",!(network=(0,config.Ty)(targetChainID))||!config.R4[network]){_context4.next=13;break}return _context4.next=12,library.provider.request({method:"wallet_addEthereumChain",params:[config.R4[network]]}).catch((function(e){return"err in wallet_addEthereumChain"}));case 12:res=_context4.sent;case 13:return _context4.next=15,library.provider.request({method:"wallet_switchEthereumChain",params:[{chainId:chainIdHexString}]}).catch((function(e){return"err in wallet_addEthereumChain"}));case 15:return res=_context4.sent,_context4.abrupt("return",res);case 19:_context4.prev=19,_context4.t0=_context4.catch(5),console.error("err in wallet_switchEthereumChain",_context4.t0);case 22:return _context4.abrupt("return","err in wallet_switchEthereumChain");case 23:case"end":return _context4.stop()}}),_callee4,this,[[5,19]])}))),function switchNetwork(_x3){return _switchNetwork.apply(this,arguments)})},{key:"onUpdate",value:function onUpdate(p){}}]);var _switchNetwork,_disconnect,_connect,_setOtac}();function _callSuper(t,o,e){return o=(0,getPrototypeOf.Z)(o),(0,possibleConstructorReturn.Z)(t,_isNativeReflectConstruct()?Reflect.construct(o,e||[],(0,getPrototypeOf.Z)(t).constructor):o.apply(t,e))}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t})()}function _createForOfIteratorHelper(r,e){var t="undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}(r))||e&&r&&"number"==typeof r.length){t&&(r=t);var _n=0,F=function F(){};return{s:F,n:function n(){return _n>=r.length?{done:!0}:{done:!1,value:r[_n++]}},e:function e(r){throw r},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function s(){t=t.call(r)},n:function n(){var r=t.next();return a=r.done,r},e:function e(r){u=!0,o=r},f:function f(){try{a||null==t.return||t.return()}finally{if(u)throw o}}}}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}var findMetaMaskProvider=function(){var _ref=(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee(){var _window$hijackData,_ethereum,_selectedProvider,providers,selectedProvider,_iterator,_step,provider,windowEthereum;return regenerator_default().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:providers=(null===(_window$hijackData=window.hijackData)||void 0===_window$hijackData?void 0:_window$hijackData.providerList)&&window.hijackData.providerList.map((function(i){return i.provider}))||(null===(_ethereum=window.ethereum)||void 0===_ethereum?void 0:_ethereum.providers)||[],_iterator=_createForOfIteratorHelper(providers||[]),_context.prev=2,_iterator.s();case 4:if((_step=_iterator.n()).done){_context.next=11;break}if(!(provider=_step.value).isMetaMask){_context.next=9;break}return selectedProvider=provider,_context.abrupt("break",11);case 9:_context.next=4;break;case 11:_context.next=16;break;case 13:_context.prev=13,_context.t0=_context.catch(2),_iterator.e(_context.t0);case 16:return _context.prev=16,_iterator.f(),_context.finish(16);case 19:return windowEthereum=window.metamaskWallet||window.ethereum,_context.abrupt("return",null!==(_selectedProvider=selectedProvider)&&void 0!==_selectedProvider?_selectedProvider:null!=windowEthereum&&windowEthereum.isMetaMask&&windowEthereum._metamask?windowEthereum:null);case 21:case"end":return _context.stop()}}),_callee,null,[[2,13,16,19]])})));return function findMetaMaskProvider(){return _ref.apply(this,arguments)}}(),MetamaskWalletModal=function(_XterDappBaseModel){function MetamaskWalletModal(){var autoConnect=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return(0,classCallCheck.Z)(this,MetamaskWalletModal),_callSuper(this,MetamaskWalletModal,[type.i.METAMASK,autoConnect])}return(0,inherits.Z)(MetamaskWalletModal,_XterDappBaseModel),(0,createClass.Z)(MetamaskWalletModal,[{key:"init",value:(_init=(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee2(force){var metamask,host,pathname,mmDeepLink,_this=this;return regenerator_default().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(!this.library){_context2.next=2;break}return _context2.abrupt("return");case 2:return _context2.next=4,findMetaMaskProvider();case 4:if((metamask=_context2.sent)||!force){_context2.next=10;break}return lib.tq?(host=window.location.host,pathname=window.location.pathname,mmDeepLink="https://metamask.app.link/dapp/".concat(host).concat(pathname,"?_otac=").concat(this._otac||""),this.throttleJump(mmDeepLink,!0,(function(){return _this.setOtac()}))):this.throttleJump(config.uY),_context2.abrupt("return");case 10:metamask&&(this.walletProvider=metamask);case 11:case"end":return _context2.stop()}}),_callee2,this)}))),function init(_x){return _init.apply(this,arguments)})}]);var _init}(XterDappBaseModel);const OKXWalletModal=null;function SafepaModel_callSuper(t,o,e){return o=(0,getPrototypeOf.Z)(o),(0,possibleConstructorReturn.Z)(t,SafepaModel_isNativeReflectConstruct()?Reflect.construct(o,e||[],(0,getPrototypeOf.Z)(t).constructor):o.apply(t,e))}function SafepaModel_isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(SafepaModel_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t})()}var SafepalWalletModal=function(_XterDappBaseModel){function SafepalWalletModal(){var autoConnect=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return(0,classCallCheck.Z)(this,SafepalWalletModal),SafepaModel_callSuper(this,SafepalWalletModal,[type.i.SAFEPAL,autoConnect])}return(0,inherits.Z)(SafepalWalletModal,_XterDappBaseModel),(0,createClass.Z)(SafepalWalletModal,[{key:"init",value:(_init=(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee(force){var safepalProvider;return regenerator_default().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(!this.library){_context.next=2;break}return _context.abrupt("return");case 2:if((safepalProvider=window.safepalProvider)||!force){_context.next=6;break}return this.throttleJump("https://www.safepal.com/download?product=2"),_context.abrupt("return");case 6:safepalProvider&&(this.walletProvider=safepalProvider);case 7:case"end":return _context.stop()}}),_callee,this)}))),function init(_x){return _init.apply(this,arguments)})}]);var _init}(XterDappBaseModel);function TrustWalletModel_callSuper(t,o,e){return o=(0,getPrototypeOf.Z)(o),(0,possibleConstructorReturn.Z)(t,TrustWalletModel_isNativeReflectConstruct()?Reflect.construct(o,e||[],(0,getPrototypeOf.Z)(t).constructor):o.apply(t,e))}function TrustWalletModel_isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(TrustWalletModel_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t})()}var TrustWalletModal=function(_XterDappBaseModel){function TrustWalletModal(){var autoConnect=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return(0,classCallCheck.Z)(this,TrustWalletModal),TrustWalletModel_callSuper(this,TrustWalletModal,[type.i.TRUST,autoConnect])}return(0,inherits.Z)(TrustWalletModal,_XterDappBaseModel),(0,createClass.Z)(TrustWalletModal,[{key:"init",value:(_init=(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee(force){var trustProvider,deepLink,_this=this;return regenerator_default().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(!this.library){_context.next=2;break}return _context.abrupt("return");case 2:if((trustProvider=getTrustWalletFromWindow())||!force){_context.next=6;break}return lib.tq?(deepLink="https://link.trustwallet.com/open_url?coin_id=60&url=".concat(encodeURIComponent("".concat(window.location.href).concat(location.href.includes("?")?"&":"?","_otac=").concat(this._otac))),this.throttleJump(deepLink,!0,(function(){return _this.setOtac()}))):this.throttleJump("https://chrome.google.com/webstore/detail/trust-wallet/egjidjbpglichdcondbcbdnbeeppgdph"),_context.abrupt("return");case 6:trustProvider&&(this.walletProvider=trustProvider);case 7:case"end":return _context.stop()}}),_callee,this)}))),function init(_x){return _init.apply(this,arguments)})}]);var _init}(XterDappBaseModel);function getTrustWalletFromWindow(){var _window$ethereum,_trustwallet,_window$ethereum$prov,isTrustWallet=function isTrustWallet(ethereum){return!!ethereum.isTrust};return"undefined"!=typeof window&&void 0!==window.ethereum?isTrustWallet(window.ethereum)?window.ethereum:null!==(_window$ethereum=window.ethereum)&&void 0!==_window$ethereum&&_window$ethereum.providers?null!==(_window$ethereum$prov=window.ethereum.providers.find(isTrustWallet))&&void 0!==_window$ethereum$prov?_window$ethereum$prov:null:null!==(_trustwallet=window.trustwallet)&&void 0!==_trustwallet?_trustwallet:null:null}var toArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/toArray.js"),index_es=__webpack_require__("./node_modules/@walletconnect/ethereum-provider/dist/index.es.js"),WalletConnectModel_console=__webpack_require__("./node_modules/console-browserify/index.js");function WalletConnectModel_callSuper(t,o,e){return o=(0,getPrototypeOf.Z)(o),(0,possibleConstructorReturn.Z)(t,WalletConnectModel_isNativeReflectConstruct()?Reflect.construct(o,e||[],(0,getPrototypeOf.Z)(t).constructor):o.apply(t,e))}function WalletConnectModel_isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(WalletConnectModel_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t})()}function WalletConnectModel_arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}var _step,rpcMap={},chains=[],_iterator=function WalletConnectModel_createForOfIteratorHelper(r,e){var t="undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=function WalletConnectModel_unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return WalletConnectModel_arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?WalletConnectModel_arrayLikeToArray(r,a):void 0}}(r))||e&&r&&"number"==typeof r.length){t&&(r=t);var _n=0,F=function F(){};return{s:F,n:function n(){return _n>=r.length?{done:!0}:{done:!1,value:r[_n++]}},e:function e(r){throw r},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function s(){t=t.call(r)},n:function n(){var r=t.next();return a=r.done,r},e:function e(r){u=!0,o=r},f:function f(){try{a||null==t.return||t.return()}finally{if(u)throw o}}}}(config.PB);try{for(_iterator.s();!(_step=_iterator.n()).done;){var network=_step.value;rpcMap[(0,config.LQ)(network)]=(0,config.CV)(network),chains.push((0,config.LQ)(network))}}catch(err){_iterator.e(err)}finally{_iterator.f()}var getWCProvider=function(){var _ref=(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee(){var _chains$map,_chains$map2,defaultChain,optionalChains;return regenerator_default().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _chains$map=chains.map((function(id){return id})),_chains$map2=(0,toArray.Z)(_chains$map),defaultChain=_chains$map2[0],optionalChains=_chains$map2.slice(1),_context.next=3,index_es.ZP.init({projectId:"5de61b08a16b6aa2f41cfed70303585e",chains:[defaultChain],optionalChains,showQrModal:!0,qrModalOptions:{themeVariables:{"--wcm-z-index":"10000"}},optionalMethods:["wallet_switchEthereumChain","wallet_addEthereumChain","eth_signTypedData_v4"],events:["connect","disconnect","chainChanged","accountsChanged"],rpcMap});case 3:return _context.abrupt("return",_context.sent);case 4:case"end":return _context.stop()}}),_callee)})));return function getWCProvider(){return _ref.apply(this,arguments)}}(),WcWalletModal=function(_XterDappBaseModel){function WcWalletModal(){var autoConnect=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return(0,classCallCheck.Z)(this,WcWalletModal),WalletConnectModel_callSuper(this,WcWalletModal,[type.i.WALLETCONNECT,autoConnect])}return(0,inherits.Z)(WcWalletModal,_XterDappBaseModel),(0,createClass.Z)(WcWalletModal,[{key:"init",value:(_init=(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee2(force){var _this$walletProvider$2,_this$walletProvider$,wcProvider;return regenerator_default().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(!this.walletProvider){_context2.next=5;break}if(null!==(_this$walletProvider$=this.walletProvider.accounts)&&void 0!==_this$walletProvider$&&_this$walletProvider$.length&&this.walletProvider.chainId||!force){_context2.next=4;break}return _context2.next=4,this.walletProvider.connect().catch((function(e){return WalletConnectModel_console.error(e)}));case 4:return _context2.abrupt("return");case 5:return _context2.next=7,getWCProvider();case 7:if(wcProvider=_context2.sent){_context2.next=10;break}return _context2.abrupt("return");case 10:if(this.walletProvider=wcProvider,null!==(_this$walletProvider$2=this.walletProvider.accounts)&&void 0!==_this$walletProvider$2&&_this$walletProvider$2.length&&this.walletProvider.chainId||!force){_context2.next=14;break}return _context2.next=14,this.walletProvider.connect().catch((function(e){return WalletConnectModel_console.error(e)}));case 14:case"end":return _context2.stop()}}),_callee2,this)}))),function init(_x){return _init.apply(this,arguments)})}]);var _init}(XterDappBaseModel)},"?25ed":()=>{}}]);