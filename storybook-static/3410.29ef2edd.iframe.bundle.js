"use strict";(self.webpackChunkxterio=self.webpackChunkxterio||[]).push([[3410],{"./src/components/message/MessageEntry.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{H5MessageEntry:()=>H5MessageEntry,WebMessageEntry:()=>WebMessageEntry});var chunk_UUZWUER5=__webpack_require__("./node_modules/@chakra-ui/popover/dist/chunk-UUZWUER5.mjs"),chunk_24I2HV4N=__webpack_require__("./node_modules/@chakra-ui/popover/dist/chunk-24I2HV4N.mjs"),chunk_Z3POGKNI=__webpack_require__("./node_modules/@chakra-ui/popover/dist/chunk-Z3POGKNI.mjs"),chunk_ZJJGQIVY=__webpack_require__("./node_modules/@chakra-ui/system/dist/chunk-ZJJGQIVY.mjs"),chunk_ZHQNHOQS=__webpack_require__("./node_modules/@chakra-ui/system/dist/chunk-ZHQNHOQS.mjs"),dist=__webpack_require__("./node_modules/@chakra-ui/shared-utils/dist/index.mjs"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),PopoverBody=(0,chunk_ZJJGQIVY.G)((function PopoverBody2(props,ref){const{getBodyProps}=(0,chunk_Z3POGKNI.lp)(),styles=(0,chunk_Z3POGKNI.SV)();return(0,jsx_runtime.jsx)(chunk_ZHQNHOQS.m.div,{...getBodyProps(props,ref),className:(0,dist.cx)("chakra-popover__body",props.className),__css:styles.body})}));PopoverBody.displayName="PopoverBody";var chunk_OFUG2FGD=__webpack_require__("./node_modules/@chakra-ui/popover/dist/chunk-OFUG2FGD.mjs"),chunk_YEXLRKHC=__webpack_require__("./node_modules/@chakra-ui/modal/dist/chunk-YEXLRKHC.mjs"),chunk_O5JINC5D=__webpack_require__("./node_modules/@chakra-ui/modal/dist/chunk-O5JINC5D.mjs"),chunk_3BV2YY2B=__webpack_require__("./node_modules/@chakra-ui/modal/dist/chunk-3BV2YY2B.mjs"),chunk_ST3CR3NJ=__webpack_require__("./node_modules/@chakra-ui/modal/dist/chunk-ST3CR3NJ.mjs"),react=__webpack_require__("./node_modules/react/index.js"),global_context=__webpack_require__("./src/contexts/global-context/index.tsx"),xterio_icons_esm=__webpack_require__("./node_modules/xterio-icons/dist/xterio-icons.esm.js"),asyncToGenerator=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),slicedToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),regenerator=__webpack_require__("./node_modules/@babel/runtime/regenerator/index.js"),regenerator_default=__webpack_require__.n(regenerator),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),contexts=__webpack_require__("./src/contexts/index.ts"),message=__webpack_require__("./src/contexts/global-context/message.ts"),hooks=__webpack_require__("./src/hooks/index.ts"),esm_extends=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/extends.js"),toConsumableArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),useTimeout=__webpack_require__("./node_modules/ahooks/es/useTimeout/index.js"),index_es=__webpack_require__("./node_modules/react-infinite-scroll-component/dist/index.es.js"),loading=__webpack_require__("./src/components/loading/loading.tsx"),dayjs_min=__webpack_require__("./node_modules/dayjs/dayjs.min.js"),dayjs_min_default=__webpack_require__.n(dayjs_min),XImage=__webpack_require__("./src/components/image/XImage.tsx"),__jsx=react.createElement,MsgCardBottom=function MsgCardBottom(_ref){var timeStr=_ref.timeStr,url=_ref.url,className=_ref.className;return __jsx("div",{className:classnames_default()("mt-4 flex justify-between items-center opacity-40",className)},__jsx("span",null,timeStr),url?__jsx(react.Fragment,null,__jsx("span",{className:"uppercase flex-1 text-right"},"view details"),__jsx(xterio_icons_esm.IconArrow12,{className:"-rotate-90"})):null)};MsgCardBottom.displayName="MsgCardBottom";try{MsgCardBottom.displayName="MsgCardBottom",MsgCardBottom.__docgenInfo={description:"",displayName:"MsgCardBottom",props:{timeStr:{defaultValue:null,description:"",name:"timeStr",required:!0,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},url:{defaultValue:null,description:"",name:"url",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/message/MsgCardBottom.tsx#MsgCardBottom"]={docgenInfo:MsgCardBottom.__docgenInfo,name:"MsgCardBottom",path:"src/components/message/MsgCardBottom.tsx#MsgCardBottom"})}catch(__react_docgen_typescript_loader_error){}var AnnouncementItem_jsx=react.createElement,AnnouncementItem=function AnnouncementItem(_ref){var title=_ref.title,describe=_ref.describe,icon=_ref.icon,image=_ref.image,created_at=_ref.created_at,url=_ref.url,_useMemo=(0,react.useMemo)((function(){return{timeStr:dayjs_min_default().utc(1e3*created_at).local().format("YYYY-MM-DD HH:mm"),imageUrl:image[0]||""}}),[created_at,image]),timeStr=_useMemo.timeStr,imageUrl=_useMemo.imageUrl;return AnnouncementItem_jsx("li",{onClick:function onClick(){url&&window.open(url,"_blank")},className:classnames_default()("opacity-60",url&&"cursor-pointer","h-full w-full h5:mb-4 web:hover:bg-xwhite/5  py-4 pb-0 h5:bg-xwhite/10 web:pl-6 leading-[17px] justify-center text-xs font-poppins ")},AnnouncementItem_jsx("div",{className:"web:border-b border-xwhite/10"},AnnouncementItem_jsx("div",{className:"flex items-center pb-3 h5:pl-4"},icon?AnnouncementItem_jsx("img",{className:"w-10 h-10 rounded-full",src:icon,alt:""}):AnnouncementItem_jsx(xterio_icons_esm.IconXterioScalable,{color:"#fefefe",size:24}),AnnouncementItem_jsx("span",{className:"text-xwhite pl-2 web:text-x-sm pr-1"},"Xterio"),AnnouncementItem_jsx("span",{className:"uppercase text-x-xs !leading-none px-1 py-[1px] text-xwhite/30 border border-xwhite/30"},"official")),imageUrl?AnnouncementItem_jsx("div",{className:"h-[193px] web:hidden w-full mb-3 relative"},AnnouncementItem_jsx(XImage.Z,{src:imageUrl,layout:"fill",objectFit:"cover"})):null,AnnouncementItem_jsx("div",{className:"w-full text-xwhite/60 pb-4 break-all web:pr-4"},AnnouncementItem_jsx("p",{className:"text-x-sm mb-1.5 overflow-hidden leading-xtight text-xwhite max-h-[33px] line-clamp-2 h5:px-4"},title),AnnouncementItem_jsx("div",{className:"flex items-center"},AnnouncementItem_jsx("p",{className:classnames_default()("leading-xsnug flex-1 break-all h5:px-4",imageUrl?"web:line-clamp-5 h5:line-clamp-3":"line-clamp-3")},describe),imageUrl?AnnouncementItem_jsx("div",{className:"w-30 h5:hidden h-[67px] relative ml-4"},AnnouncementItem_jsx(XImage.Z,{src:imageUrl,alt:"nft",layout:"fill",width:120,height:67,objectFit:"cover",className:""})):null),AnnouncementItem_jsx(MsgCardBottom,{className:"h5:mx-4 h5:!pt-4 h5:!mt-3 h5:border-t border-xwhite/30",url,timeStr}))))};AnnouncementItem.displayName="AnnouncementItem";try{AnnouncementItem.displayName="AnnouncementItem",AnnouncementItem.__docgenInfo={description:"",displayName:"AnnouncementItem",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"number"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},content:{defaultValue:null,description:"",name:"content",required:!1,type:{name:"string"}},describe:{defaultValue:null,description:"",name:"describe",required:!0,type:{name:"string"}},icon:{defaultValue:null,description:"",name:"icon",required:!0,type:{name:"string"}},url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"string"}},image:{defaultValue:null,description:"",name:"image",required:!0,type:{name:"string[]"}},created_at:{defaultValue:null,description:"",name:"created_at",required:!0,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/message/AnnouncementItem.tsx#AnnouncementItem"]={docgenInfo:AnnouncementItem.__docgenInfo,name:"AnnouncementItem",path:"src/components/message/AnnouncementItem.tsx#AnnouncementItem"})}catch(__react_docgen_typescript_loader_error){}var MsgEmpty_jsx=react.createElement,MsgEmpty=function MsgEmpty(_ref){var text=_ref.text,className=_ref.className;return MsgEmpty_jsx("div",{className:classnames_default()("h-full w-full flex items-center justify-center flex-col text-xwhite-op30 text-x-sm font-termina font-xmedium",className)},MsgEmpty_jsx(xterio_icons_esm.IconMessageEmpty80,{className:"text-xwhite/20"}),MsgEmpty_jsx("p",{className:"mt-3"},text))};MsgEmpty.displayName="MsgEmpty";try{MsgEmpty.displayName="MsgEmpty",MsgEmpty.__docgenInfo={description:"",displayName:"MsgEmpty",props:{text:{defaultValue:null,description:"",name:"text",required:!0,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/message/MsgEmpty.tsx#MsgEmpty"]={docgenInfo:MsgEmpty.__docgenInfo,name:"MsgEmpty",path:"src/components/message/MsgEmpty.tsx#MsgEmpty"})}catch(__react_docgen_typescript_loader_error){}var service=__webpack_require__("./src/components/message/service.ts"),Announcement_jsx=react.createElement,Announcement=function Announcement(){var _useState=(0,react.useState)([]),announcements=_useState[0],setData=_useState[1],_useState2=(0,react.useState)(-1),startTime=_useState2[0],setStart=_useState2[1],_useResponsive=(0,hooks.Fs)("md"),isLargerThanMD=(0,slicedToArray.Z)(_useResponsive,1)[0],userInfo=(0,contexts.bN)().userInfo,hasMore=(0,react.useMemo)((function(){return 0!==startTime}),[startTime]),loadMore=(0,react.useCallback)((0,asyncToGenerator.Z)(regenerator_default().mark((function _callee(){var _ref2,list,timestamp;return regenerator_default().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,(0,service.k5)(startTime);case 2:if(_context.t0=_context.sent,_context.t0){_context.next=5;break}_context.t0={};case 5:_ref2=_context.t0,list=_ref2.list,timestamp=_ref2.timestamp,list&&(void 0!==timestamp&&setStart(timestamp),null!=list&&list.length&&setData([].concat((0,toConsumableArray.Z)(announcements),(0,toConsumableArray.Z)(list))));case 9:case"end":return _context.stop()}}),_callee)}))),[announcements,startTime]);return(0,useTimeout.Z)((function(){!announcements.length&&loadMore()}),0),(0,react.useEffect)((function(){!userInfo.uuid&&setData([])}),[userInfo.uuid]),announcements.length?Announcement_jsx(index_es.Z,{dataLength:announcements.length,height:isLargerThanMD?360:"calc(100vh - 128px)",next:loadMore,hasMore,loader:Announcement_jsx("div",{className:"text-center my-2"},Announcement_jsx(loading.g,{size:16})),endMessage:Announcement_jsx("div",{className:"w-full text-center font-poppins text-xs text-xwhite-op30 pt-10 web:pb-10 h5:pb-20"},"You've reached the end"),className:classnames_default()("w-full",isLargerThanMD&&"scroll-y custom-scrollbar")},Announcement_jsx("ul",{className:"web:pt-2 h5:mt-2 h5:bg-background h5:px-4"},announcements.map((function(item){return Announcement_jsx(AnnouncementItem,(0,esm_extends.Z)({key:item.id},item))})))):-1===startTime?Announcement_jsx("div",{className:"web:h-[360px] h5:h-[calc(100vh_-_120px)] flex items-center justify-center"},Announcement_jsx(loading.g,{size:20})):Announcement_jsx(MsgEmpty,{className:"web:h-[360px] h5:h-[calc(100vh_-_120px)]",text:"No Announcements Yet"})};try{Announcement.displayName="Announcement",Announcement.__docgenInfo={description:"",displayName:"Announcement",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/message/Announcement.tsx#Announcement"]={docgenInfo:Announcement.__docgenInfo,name:"Announcement",path:"src/components/message/Announcement.tsx#Announcement"})}catch(__react_docgen_typescript_loader_error){}var tabConfig=["NOTIFICATION","ANNOUNCEMENT"],tab=__webpack_require__("./src/components/tab/index.tsx"),MessageTab_jsx=react.createElement,MessageTab=function MessageTab(_ref){var tabKey=_ref.tabKey,onTabSelected=_ref.onTabSelected,_useGlobalContext=(0,contexts.bN)(),unreadAnnouncementNum=_useGlobalContext.unreadAnnouncementNum,unreadNotificationtNum=_useGlobalContext.unreadNotificationtNum,updateUnreadNum=_useGlobalContext.updateUnreadNum,onTabClick=(0,react.useCallback)(function(){var _ref2=(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee(key){return regenerator_default().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(onTabSelected(key),key!==tabConfig[1]||!unreadAnnouncementNum){_context.next=5;break}return _context.next=4,(0,service.v8)();case 4:null==updateUnreadNum||updateUnreadNum(message.t.AllAnnouncement);case 5:case"end":return _context.stop()}}),_callee)})));return function(_x){return _ref2.apply(this,arguments)}}(),[onTabSelected,unreadAnnouncementNum,updateUnreadNum]),tabs=(0,react.useMemo)((function(){return tabConfig.map((function(item){return{className:"NOTIFICATION"===item?"mr-10":"",value:"NOTIFICATION"===item?unreadNotificationtNum?MessageTab_jsx("span",{className:"relative"},item,MessageTab_jsx("i",{className:"absolute h-4 inline-block rounded-full min-w-[16px] text-center top-[1px] bg-error ml-1 text-xwhite left-full not-italic text-xs leading-[17px] px-1 font-xmedium font-poppins"},unreadNotificationtNum>99?"99+":unreadNotificationtNum)):item:MessageTab_jsx("span",{className:classnames_default()(unreadAnnouncementNum&&"red-point after:top-0.5 after:-right-2")},item),key:item}}))}),[unreadAnnouncementNum,unreadNotificationtNum]);return MessageTab_jsx(react.Fragment,null,MessageTab_jsx(tab.Z,{theme:"message",className:"flex-1 p-0",align:"left",list:tabs,active:tabKey,onTabSelected:onTabClick}))};try{MessageTab.displayName="MessageTab",MessageTab.__docgenInfo={description:"",displayName:"MessageTab",props:{tabKey:{defaultValue:null,description:"",name:"tabKey",required:!0,type:{name:"string"}},onTabSelected:{defaultValue:null,description:"",name:"onTabSelected",required:!0,type:{name:"(key: string) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/message/MessageTab.tsx#MessageTab"]={docgenInfo:MessageTab.__docgenInfo,name:"MessageTab",path:"src/components/message/MessageTab.tsx#MessageTab"})}catch(__react_docgen_typescript_loader_error){}var components_loading=__webpack_require__("./src/components/loading/index.ts"),next_router=__webpack_require__("./node_modules/next/router.js"),utils=__webpack_require__("./src/common/utils/index.ts"),cut_corner=__webpack_require__("./src/components/card/cut-corner/index.tsx"),NotificationEnum=function(NotificationEnum){return NotificationEnum.PN_WALLET="T_CREATE_PN_WALLET_SUCC",NotificationEnum.PN_AA_WALLET="T_CREATE_AA_WALLET_SUCC",NotificationEnum.REGISTER_ACCOUNT="T_REGISTER_ACCOUNT_SUCC",NotificationEnum.BIND_WALLET="T_BIND_WALLET_SUCC",NotificationEnum.LAUNCHPAD_WHITELIST="T_LAUNCHPAD_WHITELIST_SUCC",NotificationEnum.LAUNCHPAD_WHITELIST_VERIFY="T_LAUNCHPAD_WHITELIST_VERIFY_SUCC",NotificationEnum.LAUNCHPAD_WHITELIST_VERIFY_FAIL="T_LAUNCHPAD_WHITELIST_VERIFY_FAIL",NotificationEnum.BUY_NFT="T_BUY_NFT_SUCC",NotificationEnum.BUY_NFT_FAIL="T_BUY_NFT_FAIL",NotificationEnum.MINT_NFT="T_MINT_NFT_SUCC",NotificationEnum.MINT_NFT_FAIL="T_MINT_NFT_FAIL",NotificationEnum.OPEN_BLIND_BOX="T_OPEN_BLIND_BOX_SUCC",NotificationEnum.OPEN_BLIND_BOX_FAIL="T_OPEN_BLIND_BOX_FAIL",NotificationEnum.TRANSFER_OUT="T_TRANSFER_NFT_OUT_SUCC",NotificationEnum.TRANSFER_OUT_FAIL="T_TRANSFER_NFT_OUT_FAIL",NotificationEnum.TRANSFER_IN_FAIL="T_TRANSFER_NFT_IN_FAIL",NotificationEnum}({}),MessageReadTypeEnum=function(MessageReadTypeEnum){return MessageReadTypeEnum[MessageReadTypeEnum.unread=1]="unread",MessageReadTypeEnum[MessageReadTypeEnum.read=2]="read",MessageReadTypeEnum}({}),MessageUrlTypeEnum=function(MessageUrlTypeEnum){return MessageUrlTypeEnum[MessageUrlTypeEnum.inner=1]="inner",MessageUrlTypeEnum[MessageUrlTypeEnum.outer=2]="outer",MessageUrlTypeEnum}({}),NotificationItem_jsx=react.createElement,NotificationItem=function NotificationItem(_ref){var title=_ref.title,id=_ref.id,content=_ref.content,url=_ref.url,is_read=_ref.is_read,created_at=_ref.created_at,content_url=_ref.content_url,template_key=_ref.template_key,router=(0,next_router.useRouter)(),_useGlobalContext=(0,contexts.bN)(),updateUnreadNum=_useGlobalContext.updateUnreadNum,unreadNotificationtNum=_useGlobalContext.unreadNotificationtNum,openWallets=_useGlobalContext.openWallets,closeAll=_useGlobalContext.closeAll,closeMessage=_useGlobalContext.closeMessage,_useState=(0,react.useState)(is_read===MessageReadTypeEnum.read),_isRead=_useState[0],setReadStatus=_useState[1],isRead=_isRead||!unreadNotificationtNum,_useMemo=(0,react.useMemo)((function(){var _ref2=(null==content_url?void 0:content_url.tx_hash)||{},hash=_ref2.hash,network=_ref2.network;return{timeStr:dayjs_min_default().utc(1e3*created_at).local().format("YYYY-MM-DD HH:mm"),hashStr:hash?(0,utils.vD)(hash):"",transitionUrl:network&&hash?(0,utils.km)(hash,network):""}}),[null==content_url?void 0:content_url.tx_hash,created_at]),timeStr=_useMemo.timeStr,hashStr=_useMemo.hashStr,transitionUrl=_useMemo.transitionUrl,onClick=(0,react.useCallback)((0,asyncToGenerator.Z)(regenerator_default().mark((function _callee(){var _ref4,urlType,href;return regenerator_default().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(urlType=(_ref4=url||{}).type,href=_ref4.href,setReadStatus(!0),closeMessage(),[NotificationEnum.PN_WALLET,NotificationEnum.PN_AA_WALLET,NotificationEnum.BIND_WALLET].includes(template_key)?null==openWallets||openWallets():urlType===MessageUrlTypeEnum.inner?(null==closeAll||closeAll(),router.push(href)):href&&window.open(href,"_blank"),isRead){_context.next=8;break}return null==updateUnreadNum||updateUnreadNum(message.t.Notification),_context.next=8,(0,service.q3)(id);case 8:case"end":return _context.stop()}}),_callee)}))),[closeAll,closeMessage,id,isRead,openWallets,router,template_key,updateUnreadNum,url]);return NotificationItem_jsx("li",{onClick,className:classnames_default()(isRead&&"opacity-60","h-full w-full py-4 pb-0 web:pl-6 h5:pl-4 cursor-pointer flex leading-[17px] h5:justify-center text-xs font-poppins web:hover:bg-xwhite/5")},NotificationItem_jsx("span",{className:classnames_default()("items-start",!isRead&&"red-point")},NotificationItem_jsx(xterio_icons_esm.IconMessageLogoScalable,{size:40,className:"text-white"})),NotificationItem_jsx("div",{className:"flex-1 text-xwhite ml-3 border-b border-xwhite/10 pb-4 break-all web:pr-6 h5:pr-4"},NotificationItem_jsx("p",{className:"text-sm"},title),NotificationItem_jsx("p",{className:"mt-2 text-xwhite/60 break-normal",dangerouslySetInnerHTML:{__html:content}}),transitionUrl?NotificationItem_jsx("a",{target:"_blank",onClick:function onClick(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),null==updateUnreadNum||updateUnreadNum(message.t.Notification),setReadStatus(!0),isRead||(0,service.q3)(id)},href:transitionUrl,rel:"noreferrer"},NotificationItem_jsx(cut_corner.j,{cutType:"default",className:"!w-auto inline-flex group h-6 mt-3 items-center justify-between px-2 bg-xcyan/10 text-x-xs text-xcyan",cutSize:"sm"},NotificationItem_jsx("span",null,hashStr),NotificationItem_jsx(xterio_icons_esm.IconDirection12,{className:"-rotate-[135deg] web:group-hover:-rotate-90 ml-0.5 transition-all"}))):null,NotificationItem_jsx(MsgCardBottom,{url:url.href,timeStr})))};NotificationItem.displayName="NotificationItem";try{NotificationItem.displayName="NotificationItem",NotificationItem.__docgenInfo={description:"",displayName:"NotificationItem",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"number"}},template_key:{defaultValue:null,description:"",name:"template_key",required:!0,type:{name:"enum",value:[{value:'"T_CREATE_PN_WALLET_SUCC"'},{value:'"T_CREATE_AA_WALLET_SUCC"'},{value:'"T_REGISTER_ACCOUNT_SUCC"'},{value:'"T_BIND_WALLET_SUCC"'},{value:'"T_LAUNCHPAD_WHITELIST_SUCC"'},{value:'"T_LAUNCHPAD_WHITELIST_VERIFY_SUCC"'},{value:'"T_LAUNCHPAD_WHITELIST_VERIFY_FAIL"'},{value:'"T_BUY_NFT_SUCC"'},{value:'"T_BUY_NFT_FAIL"'},{value:'"T_MINT_NFT_SUCC"'},{value:'"T_MINT_NFT_FAIL"'},{value:'"T_OPEN_BLIND_BOX_SUCC"'},{value:'"T_OPEN_BLIND_BOX_FAIL"'},{value:'"T_TRANSFER_NFT_OUT_SUCC"'},{value:'"T_TRANSFER_NFT_OUT_FAIL"'},{value:'"T_TRANSFER_NFT_IN_FAIL"'}]}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},content:{defaultValue:null,description:"",name:"content",required:!0,type:{name:"string"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:"1"},{value:"2"}]}},is_read:{defaultValue:null,description:"",name:"is_read",required:!0,type:{name:"enum",value:[{value:"1"},{value:"2"}]}},content_url:{defaultValue:null,description:"",name:"content_url",required:!0,type:{name:"{ tx_hash: { hash: string; network: string; }; } | null"}},icon:{defaultValue:null,description:"",name:"icon",required:!0,type:{name:"string"}},created_at:{defaultValue:null,description:"",name:"created_at",required:!0,type:{name:"number"}},url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"{ type: MessageUrlTypeEnum; href: string; }"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/message/NotificationItem.tsx#NotificationItem"]={docgenInfo:NotificationItem.__docgenInfo,name:"NotificationItem",path:"src/components/message/NotificationItem.tsx#NotificationItem"})}catch(__react_docgen_typescript_loader_error){}var Notification_jsx=react.createElement,Notification=function Notification(){var _useGlobalContext=(0,contexts.bN)(),userInfo=_useGlobalContext.userInfo,updateUnreadNum=_useGlobalContext.updateUnreadNum,_useState=(0,react.useState)([]),notifications=_useState[0],setData=_useState[1],_useState2=(0,react.useState)(-1),startTime=_useState2[0],setStart=_useState2[1],hasMore=(0,react.useMemo)((function(){return 0!==startTime}),[startTime]),_useResponsive=(0,hooks.Fs)("md"),isLargerThanMD=(0,slicedToArray.Z)(_useResponsive,1)[0],loadMore=(0,react.useCallback)(function(){var _ref=(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee(init){var _ref2,list,timestamp;return regenerator_default().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,(0,service.v6)(startTime);case 2:if(_context.t0=_context.sent,_context.t0){_context.next=5;break}_context.t0={};case 5:_ref2=_context.t0,list=_ref2.list,timestamp=_ref2.timestamp,list&&(void 0!==timestamp&&setStart(timestamp),null!=list&&list.length&&setData([].concat((0,toConsumableArray.Z)(notifications),(0,toConsumableArray.Z)(list))));case 9:case"end":return _context.stop()}}),_callee)})));return function(_x){return _ref.apply(this,arguments)}}(),[notifications,startTime]);return(0,useTimeout.Z)((function(){notifications.length||(loadMore(),null==updateUnreadNum||updateUnreadNum(message.t.Init))}),0),(0,react.useEffect)((function(){!userInfo.uuid&&setData([])}),[userInfo.uuid]),notifications.length?Notification_jsx(index_es.Z,{dataLength:notifications.length,height:isLargerThanMD?360:"calc(100vh - 128px)",next:loadMore,hasMore,loader:Notification_jsx("div",{className:"text-center my-2"},Notification_jsx(components_loading.gb,{size:16})),endMessage:Notification_jsx("div",{className:"w-full text-center font-poppins text-xs text-xwhite-op30 pt-10 web:pb-10 h5:pb-20"},"You've reached the end"),className:classnames_default()(isLargerThanMD&&"scroll-y custom-scrollbar")},Notification_jsx("ul",{className:"web:pt-2"},notifications.map((function(item){return Notification_jsx(NotificationItem,(0,esm_extends.Z)({key:item.id},item))})))):-1===startTime?Notification_jsx("div",{className:"web:h-[360px] h5:h-[calc(100vh_-_120px)] flex items-center justify-center"},Notification_jsx(components_loading.gb,{size:20})):Notification_jsx(MsgEmpty,{className:"web:h-[360px] h5:h-[calc(100vh_-_120px)]",text:"No Notifications Yet"})};try{Notification.displayName="Notification",Notification.__docgenInfo={description:"",displayName:"Notification",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/message/Notification.tsx#Notification"]={docgenInfo:Notification.__docgenInfo,name:"Notification",path:"src/components/message/Notification.tsx#Notification"})}catch(__react_docgen_typescript_loader_error){}var message_jsx=react.createElement,Message=function Message(){var _useGlobalContext=(0,contexts.bN)(),unreadNotificationtNum=_useGlobalContext.unreadNotificationtNum,unreadAnnouncementNum=_useGlobalContext.unreadAnnouncementNum,updateUnreadNum=_useGlobalContext.updateUnreadNum,hasNewMessage=_useGlobalContext.hasNewMessage,_useState=(0,react.useState)(tabConfig[0]),tabKey=_useState[0],onTabSelected=_useState[1],_useResponsive=(0,hooks.Fs)("md"),isLargerThanMD=(0,slicedToArray.Z)(_useResponsive,1)[0],readAll=(0,react.useCallback)((0,asyncToGenerator.Z)(regenerator_default().mark((function _callee(){return regenerator_default().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,Promise.all([unreadNotificationtNum&&(0,service.Sf)(),unreadAnnouncementNum&&(0,service.v8)()]);case 2:(unreadNotificationtNum||unreadAnnouncementNum)&&(null==updateUnreadNum||updateUnreadNum(message.t.Clear));case 3:case"end":return _context.stop()}}),_callee)}))),[unreadAnnouncementNum,unreadNotificationtNum,updateUnreadNum]);return message_jsx(react.Fragment,null,message_jsx("section",{className:classnames_default()("w-full flex items-center flex-col text-xwhite-op30 text-x-sm font-termina font-xmedium")},message_jsx("div",{className:"web:pl-6 web:pr-5  h5:px-4 flex items-center w-full web:border-b border-xwhite/10"},message_jsx(MessageTab,{tabKey,onTabSelected}),isLargerThanMD?message_jsx(xterio_icons_esm.IconMessageClear40,{onClick:readAll,className:classnames_default()("font-bold rounded-full p-1",hasNewMessage?"text-xwhite cursor-pointer web:hover:bg-xwhite/10":"text-xwhite/30")}):message_jsx(xterio_icons_esm.IconMessageClear16,{onClick:readAll,className:classnames_default()("font-bold rounded-full p-1",hasNewMessage?"text-xwhite cursor-pointer web:hover:bg-xwhite/10":"text-xwhite/30"),size:24})),message_jsx("div",{className:tabKey===tabConfig[0]?"hidden":"w-full"},message_jsx(Announcement,null)),message_jsx("div",{className:tabKey!==tabConfig[0]?"hidden":"w-full"},message_jsx(Notification,null))))};try{Message.displayName="Message",Message.__docgenInfo={description:"",displayName:"Message",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/message/index.tsx#Message"]={docgenInfo:Message.__docgenInfo,name:"Message",path:"src/components/message/index.tsx#Message"})}catch(__react_docgen_typescript_loader_error){}var context_jsx=react.createElement,MessageContext=(0,react.createContext)({}),MessageProvider=function MessageProvider(_ref){var children=_ref.children,isOpen=_ref.isOpen,_useState=(0,react.useState)(!1),isCache=_useState[0],setCache=_useState[1];return(0,react.useEffect)((function(){!isCache&&setCache(isOpen||isCache)}),[isCache,isOpen]),context_jsx(MessageContext.Provider,{value:{isOpen}},isCache?children:null)};MessageProvider.displayName="MessageProvider";try{MessageProvider.displayName="MessageProvider",MessageProvider.__docgenInfo={description:"",displayName:"MessageProvider",props:{isOpen:{defaultValue:null,description:"",name:"isOpen",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/message/context.tsx#MessageProvider"]={docgenInfo:MessageProvider.__docgenInfo,name:"MessageProvider",path:"src/components/message/context.tsx#MessageProvider"})}catch(__react_docgen_typescript_loader_error){}var MessageEntry_jsx=react.createElement,WebMessageEntry=function WebMessageEntry(){var _useGlobalContext=(0,global_context.bN)(),hasNewMessage=_useGlobalContext.hasNewMessage,userInfo=_useGlobalContext.userInfo,openMessage=_useGlobalContext.openMessage,messageOpen=_useGlobalContext.messageOpen,closeMessage=_useGlobalContext.closeMessage;return userInfo.isLogin?MessageEntry_jsx(chunk_UUZWUER5.J,{isOpen:messageOpen,placement:"bottom-end"},MessageEntry_jsx(chunk_24I2HV4N.y,{backgroundColor:"transparent",width:400,height:400,borderRadius:0,border:"none",className:"mt-1 focus-visible:!shadow-none"},MessageEntry_jsx(PopoverBody,{padding:0},MessageEntry_jsx(MessageProvider,{isOpen:messageOpen},MessageEntry_jsx("div",{onClick:function onClick(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()},className:"border-transparent border bg-darkblue",style:{borderImage:"linear-gradient(to right, rgba(235,185,231, 0.2), rgba(158,230,252, 0.2)) 1"}},MessageEntry_jsx(Message,null))))),MessageEntry_jsx(chunk_OFUG2FGD.x,null,MessageEntry_jsx("span",{onClick:function onClick(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),messageOpen?closeMessage():openMessage()},className:hasNewMessage?"red-point inline-block w-10 h-10":"inline-block w-10 h-10"},MessageEntry_jsx(hasNewMessage?xterio_icons_esm.IconMessageUnread24:xterio_icons_esm.IconMessage24,{className:"text-xwhite inline-block border-2 border-xwhite/20 hover:border-transparent cursor-pointer hover:bg-xwhite/20 rounded-full p-1.5",size:40})))):null},H5MessageEntry=function H5MessageEntry(){var _useGlobalContext2=(0,global_context.bN)(),hasNewMessage=_useGlobalContext2.hasNewMessage,userInfo=_useGlobalContext2.userInfo,openMessage=_useGlobalContext2.openMessage,messageOpen=_useGlobalContext2.messageOpen,closeMessage=_useGlobalContext2.closeMessage;return userInfo.isLogin?MessageEntry_jsx(react.Fragment,null,MessageEntry_jsx("div",{id:"messagebox_button","data-sensors-click":!0,onClick:messageOpen?closeMessage:openMessage,className:"h-[85px] border-t pt-4 pb-6 border-xwhite/10 mx-6 flex items-center cursor-pointer text-xwhite/60"},MessageEntry_jsx("span",{className:hasNewMessage?"red-point ":""},MessageEntry_jsx(hasNewMessage?xterio_icons_esm.IconMessageUnread24:xterio_icons_esm.IconMessage24,{className:"inline-block",size:32})),MessageEntry_jsx("p",{className:"text-x-sm font-termina ml-2 font-xbold flex-1 uppercase"},"messages"),MessageEntry_jsx(xterio_icons_esm.IconArrow16,{className:"text-xwhite/30 -rotate-90"})),MessageEntry_jsx(chunk_YEXLRKHC.u_,{motionPreset:"slideInRight",autoFocus:!1,closeOnOverlayClick:!1,isCentered:!0,isOpen:messageOpen,onClose:closeMessage},MessageEntry_jsx(chunk_O5JINC5D.Z,{top:"80px",backgroundColor:"#141430"}),MessageEntry_jsx(chunk_3BV2YY2B.h,{containerProps:{right:0,display:"block",bottom:0,top:"80px",left:0,height:"calc(100vh - 80px)"},background:"transparent",height:"100%",m:0},MessageEntry_jsx(chunk_ST3CR3NJ.f,{p:0},MessageEntry_jsx(MessageProvider,{isOpen:messageOpen},MessageEntry_jsx(Message,null)))))):null};try{WebMessageEntry.displayName="WebMessageEntry",WebMessageEntry.__docgenInfo={description:"",displayName:"WebMessageEntry",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/message/MessageEntry.tsx#WebMessageEntry"]={docgenInfo:WebMessageEntry.__docgenInfo,name:"WebMessageEntry",path:"src/components/message/MessageEntry.tsx#WebMessageEntry"})}catch(__react_docgen_typescript_loader_error){}try{H5MessageEntry.displayName="H5MessageEntry",H5MessageEntry.__docgenInfo={description:"",displayName:"H5MessageEntry",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/message/MessageEntry.tsx#H5MessageEntry"]={docgenInfo:H5MessageEntry.__docgenInfo,name:"H5MessageEntry",path:"src/components/message/MessageEntry.tsx#H5MessageEntry"})}catch(__react_docgen_typescript_loader_error){}}}]);